# 7. Fazit

![Fazit](https://raw.github.com/ftorghele/salzburg-box/master/shared/arecipe/analysis/fazit.png)

Im obigen Diagramm ist zu sehen, welche Leistungssteigerung von Schritt zu Schritt gelang. Für die Analyse der Anwendung wurde Webrick als App Server, Ruby 1.8 und Sqlite als Datenbank verwendet. Die Anwendung wurde im Development Mode ausgeführt. Der erste Schritt war es die Anwendung im Production Mode auszuführen wodurch bereits ein wenig mehr Requests pro Sekunde möglich wurden. Anschließend wurde Sqlite durch MySql ersetzt, da in der Anwendung sehr viele Datenbank Queries abgesetzt werden und Sqlite nicht besonders performant ist. Dieser Schritt führte zum ersten größeren Sprung bei den Requests pro Sekunde. Als nächstes wurde Ruby auf 1.9.3 aktualisiert. Unter 1.8 brauchte ca. jeder 3. Aufruf der Front Page ungewöhnlich lange. Das liegt an der Garbage Collection. Unter Ruby 1.9 mit verbesserter Garbage Collection konnten die Requests pro Sekunde noch einmal fast verdoppelt werden. Danach wurde Webrick durch Thin ersetzt. Das brachte erstaunlicherweise recht wenig. Zu bemerken ist hier noch dass ich Webrick eigentlich bereits am Anfang gegen Thin oder Unicorn tauschen wollte aber beide schlechter als Webrick funktionierten. Zum Schluss wurde der Anwendung noch Action Caching mit memcached hinzugefügt was in rund 100 Requests pro Sekunde resultierte. Die ursprünglichen Scaling-Ziele wurden weit übertroffen. Diese waren zugegebenermaßen sehr vorsichtig geschätzt. Als nächster Schritt könnte das Caching weiter verbessert und Nginx vor den App Server gestellt werden.  